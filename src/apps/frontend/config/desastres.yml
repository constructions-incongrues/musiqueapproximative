# Configuration des desastres - Musique Approximative
#
# Ce fichier definit les regles et les recettes pour le systeme de desastres.
# Les regles permettent de determiner quand un desastre doit etre applique,
# et les recettes definissent quels assets (CSS/JS) charger.

regles:
  # Desastre "bleu" sur le titre ou l'artiste
  - query: "query.title ~ /.*bleu.*/i || query.artist ~ /.*bleu.*/i"
    recettes: [bleu]
    probability: 0.7

  # Desastre "amour" : declanche si le titre contient "amour" ou "love"
  - query: "query.title ~ /.*(amour|love).*/i"
    recettes: [amour]
    probability: 0.7

  # Desastre "robot"
  - query: "query.title ~ /.*robot.*/i"
    recettes: [robot]
    probability: 0.7

  # Desastre "fish" : declanche si le titre contient "fish" ou "poisson"
  - query: "query.title ~ /.*(fish|poisson).*/i"
    recettes: [fish]
    probability: 0.7

  # Desastre "noir" : declanche si le titre contient "noir" ou "black"
  - query: "query.title ~ /.*(noir|black).*/i"
    recettes: [noir]
    probability: 0.7

  # Desastre "light" : declanche si le titre contient "light" ou "lumiere"
  - query: "query.title ~ /.*(light|lumiere).*/i"
    recettes: [light]
    probability: 0.7

  # Desastre "mort" : declanche si le titre contient "mort", "morte", "morts", "death", "deaths" ou "dead"
  - query: "query.title ~ /.*(morte?s?|deaths?|dead).*/i"
    recettes: [mort]
    probability: 0.7

  # Désastre téléphonique : déclenche si le titre contient "phone" ou "téléphone" ou allo
  - query: "query.title ~ /.*(phone|t[eé]l[eé]phone|allo).*/i"
    recettes: [mamie]
    probability: 0.5

  # Desastre "musique" : declanche si le titre contient "musique" ou "music"
  - query: "query.title ~ /.*(musique|music).*/i"
    recettes: [musique]
    probability: 0.7

  # Desastre "spooky" : WHO U GONNA CALL ?
  - query: "query.title == 'Spooky Mix'"
    recettes: [spooky]
    probability: 1.0

recettes:
  # Recette "bleu"
  bleu:
    enabled: true
    desastre: bleu

  # Recette "amour"
  # Les options sont accessibles via :
  # - JavaScript: window.DesastreOptions.amour.theme
  # - CSS: var(--desastre-amour-theme)
  amour:
    enabled: true
    desastre: amour

  # Recette "robot"
  robot:
    enabled: true
    desastre: robot

  # Recette "fish"
  fish:
    enabled: true
    desastre: fish

  # Recette "noir"
  noir:
    enabled: true
    desastre: noir

  # Recette "light"
  light:
    enabled: true
    desastre: light

  # Recette "mort"
  mort:
    enabled: true
    desastre: mort

  # Recette "mamie"
  mamie:
    enabled: true
    desastre: mamie
    options:
      volume: 0.5

  # Recette "musique"
  musique:
    enabled: true
    desastre: musique

  # Recette "spooky" spécialement pour les chouchouxes
  spooky:
    enabled: true
    desastre: redirect
    options:
      url: https://sos.musiqueapproximative.net
      seconds: 3
      stopParameter: noredirect