# Configuration des desastres - Musique Approximative
#
# Ce fichier definit les regles et les recettes pour le systeme de desastres.
# Les regles permettent de determiner quand un desastre doit etre applique,
# et les recettes definissent quels assets (CSS/JS) charger.

regles:
  # Desastre "bleu" sur le titre ou l'artiste
  - query: "query.title ~ /.*bleu.*/i || query.artist ~ /.*bleu.*/i"
    recettes: [bleu]
    probability: 0.7

  # Desastre "amour" : declanche si le titre contient "amour" ou "love"
  - query: "query.title ~ /.*(amour|love).*/i"
    recettes: [amour]
    probability: 0.7

  # Desastre "robot"
  - query: "query.title ~ /.*robot.*/i"
    recettes: [robot]
    probability: 0.7

  # Desastre "fish" : declanche si le titre contient "fish" ou "poisson"
  - query: "query.title ~ /.*(fish|poisson).*/i"
    recettes: [fish]
    probability: 0.7

  # Desastre "noir" : declanche si le titre contient "noir" ou "black"
  - query: "query.title ~ /.*(noir|black).*/i"
    recettes: [noir]
    probability: 0.7

  # Desastre "light" : declanche si le titre contient "light" ou "lumiere"
  - query: "query.title ~ /.*(light|lumiere).*/i"
    recettes: [light]
    probability: 0.7

  # Desastre "mort" : declanche si le titre contient "mort", "morte", "morts", "death", "deaths" ou "dead"
  - query: "query.title ~ /.*(morte?s?|deaths?|dead).*/i"
    recettes: [mort]
    probability: 0.7

  # Désastre téléphonique : déclenche si le titre contient "phone" ou "téléphone" ou allo
  - query: "query.title ~ /.*(phone|t[eé]l[eé]phone|allo).*/i"
    recettes: [mamie]
    probability: 0.5

  # Desastre "musique" : declanche si le titre contient "musique" ou "music"
  - query: "query.title ~ /.*(musique|music).*/i"
    recettes: [musique]
    probability: 0.7

  # Desastre "spooky" : WHO U GONNA CALL ?
  - query: "query.title == 'Spooky Mix'"
    recettes: [spooky]
    probability: 1.0

  # Desastres "quickos" : LALALOS !
  - query: "context.date.month == '12'"
    recettes: [quickos]
    probability: 0.1
  - query: "context.date.month == '12' && (context.date.day == '24' || context.date.day == '25')"
    recettes: [quickos]
    probability: 0.5

  # Desastre "tts"
  - query: "query.title ~ /.*(TTS).*/"
    recettes: [ttsrapper]
    probability: 1.0

  # Désastre "danse"
  - query: "query.title ~ /.*(danse).*/i"
    recettes: [danse]
    probability: 1.0

  # Désastre "mangelettres"
  - query: "query.artist ~ /.*(catani).*/i"
    recettes: [splitouine_titles_matchduration]
    probability: 1.0

  # Désastres "mangelettres"
  - query: "query.title ~ /(.*)/i"
    recettes: [consonnard, voyelliste]
    probability: 0.05

  # Désastre "radioactivite"
  - query: "query.artist ~ /.*(radioactivite).*/i"
    recettes: [radioactivite]
    probability: 1.0

  # Les options sont accessibles via :
  # - JavaScript: window.DesastreOptions.<recette>.<option>
  # - CSS: var(--desastre-<recette>-<option>)
recettes:
  # Recette "bleu"
  bleu:
    enabled: true
    desastre: bleu

  # Recette "amour"
  amour:
    enabled: true
    desastre: amour

  # Recette "robot"
  robot:
    enabled: true
    desastre: robot

  # Recette "fish"
  fish:
    enabled: true
    desastre: fish

  # Recette "noir"
  noir:
    enabled: true
    desastre: noir

  # Recette "light"
  light:
    enabled: true
    desastre: light

  # Recette "mort"
  mort:
    enabled: true
    desastre: mort
    options:
      imageFolder: /desastres/mort/img
      imageBaseName: cimetiere
      imageExtension: png
      imageCount: 20
      tombSize: 120
      delay: 800

  # Recette "mamie"
  mamie:
    enabled: true
    desastre: mamie
    options:
      volume: 0.5

  # Recette "musique"
  musique:
    enabled: true
    desastre: musique

  # Recette "spooky" spécialement pour les chouchouxes
  spooky:
    enabled: true
    desastre: redirect
    options:
      url: https://sos.musiqueapproximative.net
      seconds: 3

  # Recette "quickos" pour les fêtes
  quickos:
    enabled: true
    desastre: redirect
    options:
      url: https://quickoschantenoel.musiqueapproximative.net/?play=1
      seconds: 3

  # Recette "ttsrapper"
  ttsrapper:
    enabled: true
    desastre: tts
    options:
      selector: div.descriptif p
      lang: en-US
      # Liste de voix disponibles : speechSynthesis.getVoices().map(v => v.name);
      voices:
        - Thomas
        - Aaron
        - Albert
        - Alice
        - Alva
        - Amélie
        - Amira
        - Anna
        - Arthur
        - Bahh
        - Boing
        - Bonnes nouvelles
        - Bouffon
        - Bulles
        - Carmit
        - Catherine
        - Cloches
        - Damayanti
        - Daniel (anglais (Royaume-Uni))
        - Daniel (français (France))
        - Daria
        - Ellen
        - Flo (coréen (Corée du Sud))
        - Flo (portugais (Brésil))
        - Flo (chinois (Chine continentale))
        - Flo (chinois (Taïwan))
        - Fred
        - Gordon
        - Grandma (allemand (Allemagne))
        - Grandma (anglais (Royaume-Uni))
        - Grandma (anglais (États-Unis))
        - Grandma (espagnol (Espagne))
        - Grandma (espagnol (Mexique))
        - Grandma (finnois (Finlande))
        - Grandma (français (Canada))
        - Grandma (français (France))
        - Grandma (italien (Italie))
        - Grandma (japonais (Japon))
        - Grandma (coréen (Corée du Sud))
        - Grandma (portugais (Brésil))
        - Grandma (chinois (Chine continentale))
        - Grandma (chinois (Taïwan))
        - Grandpa (allemand (Allemagne))
        - Grandpa (anglais (Royaume-Uni))
        - Grandpa (anglais (États-Unis))
        - Grandpa (espagnol (Espagne))
        - Grandpa (espagnol (Mexique))
        - Grandpa (finnois (Finlande))
        - Grandpa (français (Canada))
        - Grandpa (français (France))
        - Grandpa (italien (Italie))
        - Grandpa (japonais (Japon))
        - Grandpa (coréen (Corée du Sud))
        - Grandpa (portugais (Brésil))
        - Grandpa (chinois (Chine continentale))
        - Grandpa (chinois (Taïwan))
        - Hattori
        - Helena
        - Ioana
        - Jacques
        - Joana
        - Junior
        - Kanya
        - Karen
        - Kathy
        - Kyoko
        - Lana
        - Laura
        - Lekha
        - Lesya
        - Li-Mu
        - Linh
        - Luciana
        - Majed
        - Marie
        - Martha
        - Martin
        - Mauvaises nouvelles
        - Meijia
        - Melina
        - Milena
        - Moira
        - Montse
        - Mónica
        - Murmure
        - Nicky
        - Nora
        - O-Ren
        - Orgue
        - Paulina
        - Ralph
        - Reed (allemand (Allemagne))
        - Reed (anglais (Royaume-Uni))
        - Reed (anglais (États-Unis))
        - Reed (espagnol (Espagne))
        - Reed (espagnol (Mexique))
        - Reed (finnois (Finlande))
        - Reed (français (Canada))
        - Reed (italien (Italie))
        - Reed (japonais (Japon))
        - Reed (coréen (Corée du Sud))
        - Reed (portugais (Brésil))
        - Reed (chinois (Chine continentale))
        - Reed (chinois (Taïwan))
        - Rishi
        - Rocko (allemand (Allemagne))
        - Rocko (anglais (Royaume-Uni))
        - Rocko (anglais (États-Unis))
        - Rocko (espagnol (Espagne))
        - Rocko (espagnol (Mexique))
        - Rocko (finnois (Finlande))
        - Rocko (français (Canada))
        - Rocko (français (France))
        - Rocko (italien (Italie))
        - Rocko (japonais (Japon))
        - Rocko (coréen (Corée du Sud))
        - Rocko (portugais (Brésil))
        - Rocko (chinois (Chine continentale))
        - Rocko (chinois (Taïwan))
        - Samantha
        - Sandy (allemand (Allemagne))
        - Sandy (anglais (Royaume-Uni))
        - Sandy (anglais (États-Unis))
        - Sandy (espagnol (Espagne))
        - Sandy (espagnol (Mexique))
        - Sandy (finnois (Finlande))
        - Sandy (français (Canada))
        - Sandy (français (France))
        - Sandy (italien (Italie))
        - Sandy (japonais (Japon))
        - Sandy (coréen (Corée du Sud))
        - Sandy (portugais (Brésil))
        - Sandy (chinois (Chine continentale))
        - Sandy (chinois (Taïwan))
        - Sara
        - Satu
        - Shelley (allemand (Allemagne))
        - Shelley (anglais (Royaume-Uni))
        - Shelley (anglais (États-Unis))
        - Shelley (espagnol (Espagne))
        - Shelley (espagnol (Mexique))
        - Shelley (finnois (Finlande))
        - Shelley (français (Canada))
        - Shelley (français (France))
        - Shelley (italien (Italie))
        - Shelley (japonais (Japon))
        - Shelley (coréen (Corée du Sud))
        - Shelley (portugais (Brésil))
        - Shelley (chinois (Chine continentale))
        - Shelley (chinois (Taïwan))
        - Sinji
        - Superstar
        - Tessa
        - Tina
        - Tingting
        - Trinoïdes
        - Tünde
        - Violoncelles
        - Wobble
        - Xander
        - Yelda
        - Yu-shu
        - Yuna
        - Zarvox
        - Zosia
        - Zuzana
        - Google Deutsch
        - Google US English
        - Google UK English Female
        - Google UK English Male
        - Google español
        - Google español de Estados Unidos
        - Google français
        - Google हिन्दी
        - Google Bahasa Indonesia
        - Google italiano
        - Google 日本語
        - Google 한국의
        - Google Nederlands
        - Google polski
        - Google português do Brasil
        - Google русский
        - Google 普通话（中国大陆）
        - Google 粤語（香港）
        - Google 國語（臺灣

  # Recette "danse"
  danse:
    enabled: true
    desastre: danse

  splitouine_titles_matchduration:
    enabled: true
    scripts:
      - https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js
      - https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js
    desastre: splitouine
    options:
      split:
        selector: p.title, h1, h2
        configuration:
          type: words, lines, chars
          mask: lines
          autoSplit: false
          wordDelimiter: " "
          wordsClass: word
      tween:
        type: chars
        audio:
          id: 'jp_audio_0'
          matchDuration: true
        configuration:
          y: 100
          rotation: 90
          opacity: 0
          ease: elastic

  # Mange-Lettres
  # L'infâme Consonnard
  # consonnard:
  #   enabled: true
  #   desastre: mangelettres
  #   scripts:
  #     - https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js
  #     - https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js
  #   options:
  #     rate: 0.5
  #     target: aeiouy
  #     case: insensitive
  #     onSplit:
  #       yPercent: 10
  #       opacity: 1
  #       stagger: 0.05
  #       duration: 15
  # # Le Voyelliste sournois
  # voyelliste:
  #   enabled: true
  #   desastre: mangelettres
  #   scripts:
  #     - https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js
  #     - https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js
  #   options:
  #     rate: 0.5
  #     target: bcdfghjklmnpqrstvwxz
  #     case: insensitive
  #     onSplit:
  #       yPercent: 10
  #       opacity: 1
  #       stagger: 0.05
  #       duration: 15

  # Recette "radioactivite"
  radioactivite:
    enabled: true
    desastre: radioactivite
    options:
      imageFolder: /desastres/radioactivite/img
      imageBaseName: radioactivite
      imageExtension: svg
      imageCount: 1
      delay: 800